@model Peluqueria_Calibrum.Models.UnionModel

@{
    Layout = "_LayoutClientes";
    ViewData["Title"] = "Home";
}
<style>
    .opcion-no-seleccionada {
        color: #cc1a00;
    }
</style>

<!-- Banner -->
<div class="banner-imagen">
    <div class="banner-texto">
        <h3 style="font-size:40px">Bienvenidos a</h3>
        <h1 style="font-size:80px">Calibrum</h1>
    </div>
    <div class="banner-button">
        <a role="button" class="btn btn-primary btn-lg text-uppercase fw-bold" data-bs-toggle="modal" data-bs-target="#modalAgendar">Agenda tu hora</a>
    </div>
</div>

<!-- About -->
<section class="about py-5" id="about" style="background:#e4e5e6;">
    <div class="container-lg py-4">
        <div class="row  align-content-center align-items-center">
            @foreach (var gestion in Model.Gestiones)
            {
            <div class="col-md-6 mt-0 mt-md-0">
                <div class="about-image text-center">
                    <img class="mw-100" src="@Url.Content("~/images/Nosotros/" + gestion.Nos_Imagen)" alt="Imagen">
                </div>
            </div>
            <div class="col-md-6 mt-md-0 order-md-first">
                <div class="about-text">
                    
                        <h1 class="text-uppercase fs-1" style="color:#0d47a1">@gestion.Nos_Titulo</h1>
                        <h2 class="fs-4">@gestion.Nos_Subtitulo</h2>
                    
                        <p class="mt-4 text-muted">
                            @gestion.Nos_Descripcion
                        </p>
                </div>
            </div>
            }
        </div>
    </div>
</section>

<!-- Servicios -->
<section id="servicios" class="servicios py-5 bg-white">
    <div class="container-sm py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="section-title text-center">
                    <h1 class=" mb-5">Servicios</h1>
                    <hr />

                </div>
            </div>
        </div>
        <div class="row text-center">
            @foreach (var servicio in Model.Servicios.Take(6))
            {
            <div class="col-md-6 col-lg-4 mb-5">
                    <div class="servicio-item shadow-lg p-4 rounded bg-white" style="height:300px;">
                        <div class="icon my-3 fs-2">
                            <img src="~/images/Logo-Cuadrado-FondoBlanco.jpg" width="100px" height="100px" alt="corte" />
                            <!-- <img src="~/images/icon/hair-clipper.png" width="100px" height="100px" alt="corte" />-->
                        </div>
                        <h3 class="fs-5 py-2">@servicio.Nombre</h3>
                        <p class="text-muted">@servicio.Descripcion</p>
                        <b>$@servicio.Precio</b>
                    </div>
            </div>
            }
            <div class="text-center">
                <a role="button" class="btn btn-primary btn-lg text-uppercase fw-bold" data-bs-toggle="modal" data-bs-target="#modalAgendar">Agenda tu hora</a>
            </div>
         </div>
</section>

<!-- Equipo -->
<section id="equipo" class="equipo py-5" style="background:#e4e5e6;">
    <div class="container-sm py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="section-title text-center">
                    <h1 class="mb-5">Nuestro Equipo</h1>
                    <hr />
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-8 col-xl-7">
                <div id="carousel1" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        @for (var i = 0; i < Model.Empleados.Count(); i++)
                        {
                            <button type="button" data-bs-target="#carousel1" data-bs-slide-to="@i" class="@(i == 0 ? "active" : "") bg-black" aria-current="@(i == 0 ? "true" : "false")" aria-label="Slide @(i + 1)"></button>
                        }
                    </div>
                    <div class="carousel-inner">
                        @for (var i = 0; i < Model.Empleados.Count(); i++)
                        {

                            var empleado = Model.Empleados.ToList()[i];
                            <div class="equipo-item bg-white carousel-item @(i == 0 ? "active" : "") shadow-sm rounded p-4 mb-5">
                                <div class="equipo-info d-flex">
                                    <img src="~/images/Logo-Cuadrado.jpg" class="img-thumbnail rounded-circle" alt="1" height="100px" width="100px">
                                    <div class="info ms-3">
                                        <h3 class="fs-4 mb-1">@($"{empleado.Nombre} {empleado.Apellido}")</h3>
                                        <strong class="m-0">@empleado.Cargo</strong><br>
                                        <span>Horario de atencion:</span>
                                        <h6>@empleado.Dias de @empleado.Hora</h6>
                                    </div>
                                    <div class="redes">
                                        <i class="fa-brands fa-instagram fa-xl"></i>
                                        <i class="fa-brands fa-facebook fa-xl"></i>
                                        <i class="fa-brands fa-whatsapp fa-xl"></i>
                                    </div>

                                </div>

                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<!-- Contacto-->
<section id="contacto" class="contacto py-5 bg-white">
    <div class="container-sm py-4">
        <div class="row">
            <div class="col-sm-4">
                <figure>
                    <blockquote>
                        <h4 class="fw-bold">TE ESPERAMOS</h4>
                    </blockquote>
                    <figcaption class="blockquote-footer text-black">
                        <cite class="text-black" style="font-size:20px">Contáctanos</cite>
                    </figcaption>
                </figure>
                <div class="contact-item d-flex mb-3 ">
                    <div class="icon fs-4"><i class="fa-solid fa-envelope"></i></div>
                    <div class="ms-3">
                        <h3 class="fs-5">Correo</h3>
                        <p class="text-muted">calibrum@calibrum.cl</p>
                    </div>
                </div>
                <div class="contact-item d-flex mb-3 ">
                    <div class="icon fs-4"><i class="fa-solid fa-phone"></i></div>
                    <div class="ms-3">
                        <h3 class="fs-5">Telefono</h3>
                        <p class="text-muted">999999999</p>
                    </div>
                </div>
                <div class="contact-item d-flex mb-3 ">
                    <div class="icon fs-4"><i class="fa-solid fa-location-dot"></i></div>
                    <div class="ms-3">
                        <h3 class="fs-5">Direccion</h3>
                        <p class="text-muted">Lorem 111 Local 1, San Joaquin</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-4">
                <figure>
                    <blockquote>
                        <h4 class="fw-bold text-uppercase">Horario</h4>
                    </blockquote>
                </figure>
                <div class="horario-inicio">
                    <h3 class="fs-5">Lunes a viernes</h3>
                    <p class="lead">10:00 am - 7:00 pm</p>
                </div>
                <div class="horario-fin">
                    <h3 class="fs-5">Sabado</h3>
                    <p class="lead">10:00 am - 5:00 pm</p>
                </div>
                <div class="cerrado">
                    <h3 class="fs-5">Domingo</h3>
                    <p class="lead"><em>Cerrado</em></p>
                </div>
            </div>
            <div class="col-sm-4">
                <img src="~/images/Logo-Cuadrado-FondoBlanco.jpg" class="img-fluid" width="300px" height="300px" alt="Logo">
            </div>
        </div>
    </div>
</section>
<!-- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -->
<!-- Modal Agendar Hora -->
<div class="modal fade" id="modalAgendar" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title fw-bold" id="modalLabel">Agendar Hora</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="formCita" action="/Home/InsertCitasInicio" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Seleccione un empleado:</label>
                        <select required class="form-select" id="select-empleado" name="Id_Empleado" aria-label="Id_Empleado" onchange="mostrarServiciosDisponibles(this)">
                            <option value="" disabled selected>Seleccione</option>
                            @foreach (var empleado in Model.Empleados)
                            {
                                <option value="@empleado.Id" data-cargo="@empleado.Cargo">@empleado.Nombre | @empleado.Cargo</option>
                            }
                        </select>
                    </div>

                    <div class="form-group mt-3">
                        <label class="form-label">Seleccione un servicio:</label>
                        <select required class="form-select" aria-label="Id_Servicio" name="Id_Servicio" id="select-servicio" disabled>
                            <option value="" disabled selected>Seleccione</option>
                            @foreach (var servicio in Model.Servicios)
                            {
                                <option value="@servicio.Id" data-categoria="@servicio.Categoria">@servicio.Nombre,  $@servicio.Precio, @servicio.Categoria</option>
                            }
                        </select>
                    </div>
                    <div class="row">
                        <div class="col-6 mt-3">
                            <label for="fecha" class="form-label">Fecha</label>
                            <input required class="form-control" type="date" id="dia" name="dia" />
                        </div>
                        <div class="col-6 mt-3">
                            <label  class="form-label">Hora</label>
                            <select required class="form-select" id="hora" name="hora">
                                <option value="" disabled selected>Seleccione</option>
                                @foreach (var hora in Model.Horas)
                                {
                                    <option value="@hora.Hora">@hora.Hora</option>
                                }
                            </select>
                        </div>
                    </div>
                    <div class="text-center mt-3">
                        <h3 class="fw-bold">Datos Cliente</h3>
                    </div>
                    <div class="mt-2">
                        <label class="form-label">Nombre Cliente</label>
                        <input required type="text" class="form-control" id="nombre_cliente" name="nombre_cliente">
                    </div>
                    <div class="mt-3">
                        <label class="form-label">Telefono Movil</label>
                        <input required type="tel" class="form-control" id="telefono" name="telefono" pattern="[0-9]{9}" placeholder="993529842" maxlength="9" oninput="validarNumero(this)">
                    </div>
                </div>
                <div class="text-center mt-3">
                    <h3 class="fw-bold">Total:  </h3>
                    <h3 id="precioSeleccionado"></h3>
                </div>
                <div class="modal-footer">
                    <button id="agendarCitaBtnModal" type="submit" class="btn btn-primary" data-toggle="modal" data-target="#modalDatos">
                        Agendar cita
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="modalDatos" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalDatosLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalDatosLabel">Datos del formulario</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="modalNombreCliente"></p>
                <p id="modalTelefono"></p>
                <p id="modalEmpleado"></p>
                <p id="modalServicio"></p>
                <p id="modalFecha"></p>
                <p id="modalHora"></p>
            </div>
            <div class="modal-footer">
                <a href="/Home" type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</a>
            </div>
        </div>
    </div>
</div>
<script>
    document.getElementById('formCita').addEventListener('submit', function (e) {
        e.preventDefault(); 

        var nombreCliente = document.getElementById('nombre_cliente').value;
        var telefono = document.getElementById('telefono').value;
        var fecha = document.getElementById('dia').value;
        var hora = document.getElementById('hora').value;
        var empleadoSelect = document.getElementById('select-empleado');
        var empleadoSeleccionado = empleadoSelect.options[empleadoSelect.selectedIndex].text;

        var servicioSelect = document.getElementById('select-servicio');
        var servicioSeleccionado = servicioSelect.options[servicioSelect.selectedIndex].text;

        var horaSelect = document.getElementById('hora');
        var horaSeleccionada = horaSelect.options[horaSelect.selectedIndex].text;


        document.getElementById('modalNombreCliente').textContent = 'Nombre Cliente: ' + nombreCliente;
        document.getElementById('modalTelefono').textContent = 'Teléfono: ' + telefono;
        document.getElementById('modalFecha').textContent = 'Fecha: ' + fecha;
        document.getElementById('modalEmpleado').textContent = 'Empleado: ' + empleadoSeleccionado;
        document.getElementById('modalServicio').textContent = 'Servicio: ' + servicioSeleccionado;
        document.getElementById('modalHora').textContent = 'Hora: ' + horaSeleccionada;


        $('#modalDatos').modal('show');

        Swal.fire({
            title: '¡Cita agendada!',
            text: '¿Deseas ver el comprobante?',
            icon: 'success',
            confirmButtonText: 'Ver comprobante',
        }).then((result) => {
            if (result.isConfirmed) {
                $('#modalAgendar').modal('hide'); 
                $('#modalComprobante').modal('show'); 
            } else {
                $('#modalAgendar').modal('hide'); 
            }
        });

        $.ajax({
            url: '/Home/InsertCitasInicio',
            type: 'POST',
            data: $(this).serialize(),
            success: function (response) {
            },
            error: function (xhr, status, error) {
            }
        });
    });
</script>

<script src="js/home.js"></script>